# Test info

- Name: CMS Application Automation >> should display dashboard after login
- Location: /home/yaqoob/CMS-End-to-End-Automation-with-Playwright/tests/POM-CMS.E2E.spec.js:54:7

# Error details

```
Error: page.waitForURL: Target page, context or browser has been closed
=========================== logs ===========================
waiting for navigation to "**/dashboard" until "load"
============================================================
    at /home/yaqoob/CMS-End-to-End-Automation-with-Playwright/tests/POM-CMS.E2E.spec.js:55:16
```

# Test source

```ts
   1 | // ----------------- Imports -----------------
   2 | import { test } from '@playwright/test';
   3 | import { generateTestData } from '../utils/testData';
   4 | import { chromium } from 'playwright';
   5 | import dotenv from 'dotenv';
   6 | import path from 'path';
   7 | import fs from 'fs';
   8 |
   9 | // Page Objects
   10 | import LoginPage from '../pages/LoginPage.js';
   11 | import GroupPage from '../pages/GroupPage';
   12 | import SubGroupPage from '../pages/SubGroupPage';
   13 | import SubSubGroupPage from '../pages/SubSubGroupPage';
   14 | import PlayerPage from '../pages/PlayerPage';
   15 | import VideoUploadPage from '../pages/VideoUploadPage.js';
   16 | import ScenarioPage from '../pages/ScenarioPage.js';
   17 | import TimetablePage from '../pages/TimetablePage';
   18 | import SchedulePage from '../pages/SchedulePage';
   19 |
   20 | // ----------------- Env Config -----------------
   21 | dotenv.config();
   22 | // ----------------- Tests -----------------
   23 | test.describe.serial('CMS Application Automation', () => {
   24 |   let browser, context, page;
   25 |   let data;
   26 |   let videoDir;
   27 |
   28 |   test.beforeAll(async () => {
   29 |     data = generateTestData(); // includes videoFileName
   30 |     videoDir = path.resolve(__dirname, '../videos');
   31 |
   32 |     // --- Video preparation ---
   33 |     const existingFiles = fs.existsSync(videoDir) ? fs.readdirSync(videoDir) : [];
   34 |     const firstVideo = existingFiles.find(file => file.endsWith('.mp4'));
   35 |     if (!firstVideo) throw new Error('⚠️ No video found in videos/ folder');
   36 |
   37 |     const oldPath = path.join(videoDir, firstVideo);
   38 |     const newPath = path.join(videoDir, data.videoFileName);
   39 |     if (oldPath !== newPath) {
   40 |       fs.renameSync(oldPath, newPath);
   41 |     }
   42 |
   43 |     // --- Browser setup ---
   44 |     browser = await chromium.launch({ headless: false, args: ['--start-maximized'] });
   45 |     context = await browser.newContext({ viewport: null, deviceScaleFactor: undefined });
   46 |     page = await context.newPage();
   47 |
   48 |     // Login
   49 |     const loginPage = new LoginPage(page);
   50 |     await loginPage.goto('https://moyai-cms.innov8.jp/login');
   51 |     await loginPage.login(process.env.CMS_EMAIL, process.env.CMS_PASSWORD);
   52 |   });
   53 |
   54 |   test('should display dashboard after login', async () => {
>  55 |     await page.waitForURL('**/dashboard', { timeout: 60000 });
      |                ^ Error: page.waitForURL: Target page, context or browser has been closed
   56 |   });
   57 |
   58 |   test('Create Group', async () => {
   59 |     const groupPage = new GroupPage(page);
   60 |     await groupPage.createGroup(data.groupName);
   61 |   });
   62 |
   63 |   test('Create SubGroup', async () => {
   64 |     const subGroupPage = new SubGroupPage(page);
   65 |     await subGroupPage.createSubgroup(data.groupName, data.subGroupName);
   66 |   });
   67 |
   68 |   test('Create Sub Subgroup', async () => {
   69 |     const subSubGroupPage = new SubSubGroupPage(page);
   70 |     await subSubGroupPage.createSubSubGroup(data.groupName, data.subGroupName, data.subSubGroupName);
   71 |   });
   72 |
   73 |   test('Create Player', async () => {
   74 |     const playerPage = new PlayerPage(page);
   75 |     await playerPage.createPlayer(data.groupName, data.subGroupName, data.subSubGroupName, data.playerName);
   76 |   });
   77 |
   78 |   test('Upload Video', async () => {
   79 |     const videoUploadPage = new VideoUploadPage(page, videoDir);
   80 |     await videoUploadPage.uploadVideo(data.videoFileName);
   81 |   });
   82 |
   83 |   test('Create Scenario', async () => {
   84 |     const scenarioPage = new ScenarioPage(page);
   85 |     await scenarioPage.createScenario(data.scenarioName, data.videoFileName);
   86 |   });
   87 |
   88 |   test('Create Timetable', async () => {
   89 |     const timetablePage = new TimetablePage(page);
   90 |     await timetablePage.createTimetable(data.timetableName, data.scenarioName);
   91 |   });
   92 |
   93 |   test('Create Schedule', async ({ page }) => {
   94 |     const schedulePage = new SchedulePage(page);
   95 |     // const scheduleName = 'Auto-Schedule-' + Date.now();
   96 |     // const timetableName = 'My Timetable'; // pass in the timetable you want
   97 |     await schedulePage.createSchedule(data.scheduleName, data.timetableName);
   98 |   });
   99 |
  100 |   test.afterAll(async () => {
  101 |     await browser.close();
  102 |   });
  103 |   
  104 | });
  105 |
```
# Test info

- Name: CMS End-to-End Modular Test Suite >> Add Subgroup
- Location: /home/yaqoob/CMS-End-To-End-Automation/tests/CMS_Automation_1.0.spec.js:369:7

# Error details

```
TimeoutError: locator.click: Timeout 10000ms exceeded.
Call log:
  - waiting for getByRole('link', { name: 'Subgroups', exact: true })

    at /home/yaqoob/CMS-End-To-End-Automation/tests/CMS_Automation_1.0.spec.js:370:70
```

# Page snapshot

```yaml
- banner:
  - heading "CMS" [level=1]
  - button "A"
- button "Expand Icon":
  - img "Expand Icon"
- heading "Dashboard" [level=2]
- main:
  - complementary:
    - navigation:
      - list:
        - listitem:
          - link:
            - /url: /dashboard
            - img
        - listitem:
          - link:
            - /url: /managers
            - img
        - listitem:
          - link:
            - /url: /dashboard
            - img
        - listitem:
          - link:
            - /url: /dashboard
            - img
        - listitem:
          - link:
            - /url: /dashboard
        - listitem:
          - link:
            - /url: /dashboard
  - article:
    - searchbox "Search..."
    - button "+ Assign Scenario"
    - button "Refresh"
    - table:
      - rowgroup:
        - row "S.No. Players Scenario Start Date & Time End Date & Time PC Status Status Actions":
          - cell "S.No."
          - cell "Players"
          - cell "Scenario"
          - cell "Start Date & Time"
          - cell "End Date & Time"
          - cell "PC Status"
          - cell "Status"
          - cell "Actions"
      - rowgroup:
        - row "â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ":
          - cell "â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ â€Œ"
    - paragraph: Showing 0-0 from 0
    - combobox:
      - option "10" [selected]
      - option "20"
      - option "50"
```

# Test source

```ts
  270 | // // Ensure email field is focused before filling
  271 | // await page.getByRole('textbox', { name: 'Enter email' }).click();
  272 | // await page.getByRole('textbox', { name: 'Enter email' }).fill(uniqueEmail);
  273 |
  274 | // // âœ… Select newly created group
  275 | // await page.locator('.css-19bb58m').click();
  276 | // await page.getByRole('option', { name: groupName }).click();
  277 |
  278 | // // Wait for "Add" button to be enabled and visible before clicking
  279 | // const managerAddButton = page.getByRole('button', { name: 'Add' });
  280 | // await managerAddButton.waitFor({ state: 'visible', timeout: 10000 });
  281 | // await expect(managerAddButton).toBeEnabled({ timeout: 10000 });
  282 | // await managerAddButton.click();
  283 | // await page.getByRole('button', { name: 'Done' }).click();
  284 | // console.log(`âœ… Manager Created: ${uniqueFirstName} ${uniqueLastName}, Email: ${uniqueEmail}, Group: ${groupName}`);
  285 |
  286 | // // âœ… Logout
  287 | // await page.getByRole('button', { name: 'A', exact: true }).click();
  288 | // await page.getByRole('button', { name: 'Logout' }).click();
  289 | // await page.getByRole('button', { name: 'Yes' }).click();
  290 | // await page.waitForURL('**/login', { timeout: 60000 });
  291 | // console.log('âœ… Logout successful');
  292 |
  293 | // await browser.close();
  294 | // });
  295 |
  296 | //--------------------------------------------------------------------------------------------------------------------------------------
  297 |
  298 | import { test, expect, chromium } from '@playwright/test';
  299 | import fs from 'fs';
  300 | import path from 'path';
  301 | import dotenv from 'dotenv';
  302 |
  303 | dotenv.config();
  304 |
  305 | let browser, context, page;
  306 | let groupNumber, groupName, subGroupName, subSubGroupName, playerName, videoFileName;
  307 | let scenarioName, timetableName, scheduleName;
  308 | let videoDir, videoPath;
  309 |
  310 | test.describe('CMS End-to-End Modular Test Suite', () => {
  311 |
  312 |   test.beforeAll(async () => {
  313 |     // Generate unique data
  314 |     groupNumber = Math.floor(Math.random() * 100000);
  315 |     groupName = `Group U${groupNumber}`;
  316 |     subGroupName = `Subgroup U${groupNumber}`;
  317 |     subSubGroupName = `Sub Subgroup U${groupNumber}`;
  318 |     playerName = `Player U${groupNumber}`;
  319 |     videoFileName = `test__${groupNumber}.mp4`;
  320 |     scenarioName = `Scenario U${groupNumber}`;
  321 |     timetableName = `Timetable U${groupNumber}`;
  322 |     scheduleName = `Schedule U${groupNumber}`;
  323 |
  324 |     // Locate videos directory
  325 |     const projectRoot = path.resolve(__dirname, '..');
  326 |     videoDir = path.join(projectRoot, 'videos');
  327 |
  328 |     // Rename existing video if present
  329 |     const existingFiles = fs.existsSync(videoDir) ? fs.readdirSync(videoDir) : [];
  330 |     const firstVideo = existingFiles.find(file => file.endsWith('.mp4'));
  331 |     if (!firstVideo) {
  332 |       console.warn('âš ï¸ No video found in videos/ folder');
  333 |       throw new Error('No video found to upload');
  334 |     }
  335 |     const oldPath = path.join(videoDir, firstVideo);
  336 |     const newPath = path.join(videoDir, videoFileName);
  337 |     fs.renameSync(oldPath, newPath);
  338 |     videoPath = newPath;
  339 |     console.log(`ðŸ†• Renamed video: ${firstVideo} âž ${videoFileName}`);
  340 |
  341 |     // Launch browser
  342 |     browser = await chromium.launch({
  343 |       headless: false, // set to true for CI
  344 |       args: ['--start-maximized'],
  345 |     });
  346 |     context = await browser.newContext({ viewport: null, deviceScaleFactor: undefined });
  347 |     page = await context.newPage();
  348 |
  349 |     // Login
  350 |     await page.goto('https://moyai-cms.innov8.jp/login', { timeout: 90000 });
  351 |     if (!process.env.CMS_EMAIL || !process.env.CMS_PASSWORD) {
  352 |       throw new Error('Missing required environment variables: CMS_EMAIL and CMS_PASSWORD');
  353 |     }
  354 |     await page.getByRole('textbox', { name: 'Enter your email address' }).fill(process.env.CMS_EMAIL);
  355 |     await page.getByRole('textbox', { name: 'Enter your password' }).fill(process.env.CMS_PASSWORD);
  356 |     await page.getByRole('button', { name: 'Login' }).click();
  357 |     await page.waitForURL('**/dashboard', { timeout: 60000 });
  358 |   });
  359 |
  360 |   test('Add Group', async () => {
  361 |     await page.getByRole('button', { name: 'Expand Icon' }).click();
  362 |     await page.getByRole('link', { name: 'Groups' }).click();
  363 |     await page.getByRole('button', { name: '+ Add Group' }).click();
  364 |     await page.getByRole('textbox', { name: 'Enter group name' }).fill(groupName);
  365 |     await page.getByRole('button', { name: 'Add' }).click();
  366 |     await page.getByRole('button', { name: 'Done' }).click();
  367 |   });
  368 |
  369 |   test('Add Subgroup', async () => {
> 370 |     await page.getByRole('link', { name: 'Subgroups', exact: true }).click();
      |                                                                      ^ TimeoutError: locator.click: Timeout 10000ms exceeded.
  371 |     await page.getByRole('button', { name: '+ Add Subgroup' }).click();
  372 |     await page.locator('.css-19bb58m').first().click();
  373 |     await page.getByRole('option', { name: groupName }).click();
  374 |     await page.getByRole('textbox', { name: 'Enter sub group name' }).fill(subGroupName);
  375 |     await page.getByRole('button', { name: 'Add' }).click();
  376 |     await page.getByRole('button', { name: 'Done' }).click();
  377 |   });
  378 |
  379 |   test('Add Sub Subgroup', async () => {
  380 |     await page.getByRole('link', { name: 'Sub Subgroups' }).click();
  381 |     await page.getByRole('button', { name: '+ Add Sub Subgroup' }).click();
  382 |     await page.locator('.css-19bb58m').first().click();
  383 |     await page.getByRole('option', { name: groupName }).click();
  384 |     await page.locator('.css-35k6c7-control .css-19bb58m').click();
  385 |     await page.getByRole('option', { name: subGroupName }).waitFor({ state: 'visible', timeout: 10000 });
  386 |     await page.getByRole('option', { name: subGroupName }).click();
  387 |     await page.getByRole('textbox', { name: 'Enter sub subgroup name' }).fill(subSubGroupName);
  388 |     await page.getByRole('button', { name: 'Add' }).click();
  389 |     await page.getByRole('button', { name: 'Done' }).click();
  390 |   });
  391 |
  392 |   test('Add Player', async () => {
  393 |     await page.getByRole('link', { name: 'Lan Manager' }).click();
  394 |     await page.getByRole('list').filter({ hasText: /^Players$/ }).getByRole('link').click();
  395 |     await page.getByRole('button', { name: '+ Add Player' }).click();
  396 |     await page.locator('.css-19bb58m').first().click();
  397 |     await page.getByRole('option', { name: groupName }).click();
  398 |     await page.waitForSelector('.css-35k6c7-control > .css-hlgwow > .css-19bb58m:not([aria-disabled="true"])', { timeout: 10000 });
  399 |     await page.locator('.css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  400 |     await page.getByRole('option', { name: subGroupName }).click();
  401 |     await page.waitForSelector('div:nth-child(3) > .css-b62m3t-container > .css-35k6c7-control > .css-hlgwow > .css-19bb58m:not([aria-disabled="true"])', { timeout: 10000 });
  402 |     await page.locator('div:nth-child(3) > .css-b62m3t-container > .css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  403 |     await page.getByRole('option', { name: subSubGroupName }).click();
  404 |     await page.getByRole('textbox', { name: 'Enter player name' }).fill(playerName);
  405 |     await page.getByRole('button', { name: 'Add' }).click();
  406 |     await page.waitForSelector('text=Player added successfully.', { timeout: 15000 });
  407 |     await page.getByRole('button', { name: 'Done' }).click();
  408 |   });
  409 |
  410 |   test('Upload Video', async () => {
  411 |     if (!fs.existsSync(videoPath)) throw new Error(`Video not found: ${videoPath}`);
  412 |     const stats = fs.statSync(videoPath);
  413 |     if (stats.size > 50 * 1024 * 1024) throw new Error(`Video exceeds 50MB: ${videoFileName}`);
  414 |
  415 |     await page.getByRole('link', { name: 'Contents' }).click();
  416 |     await page.getByRole('link', { name: 'Scenario' }).click();
  417 |     await page.getByRole('button', { name: 'All Videos' }).click();
  418 |     await page.getByRole('button', { name: '+ Add Videos' }).click();
  419 |     await page.locator('input[type="file"]').setInputFiles(videoPath);
  420 |     await page.waitForSelector(`text=${videoFileName}`, { timeout: 180000 });
  421 |     await page.waitForSelector('text=Loading...', { state: 'detached', timeout: 480000 });
  422 |     await page.getByRole('button', { name: 'Add' }).click();
  423 |     await page.getByRole('button', { name: 'Done' }).click();
  424 |   });
  425 |
  426 |   test('Create Scenario', async () => {
  427 |     await page.getByRole('button', { name: 'All Scenarios' }).click();
  428 |     await page.getByRole('button', { name: '+ Make Scenario' }).click();
  429 |     await page.getByRole('textbox', { name: 'Enter scenario name' }).fill(scenarioName);
  430 |     await page.locator('.css-19bb58m').click();
  431 |     await page.getByRole('option', { name: videoFileName }).click();
  432 |     await expect(page.getByRole('button', { name: 'Add' })).toBeEnabled({ timeout: 15000 });
  433 |     await page.getByRole('button', { name: 'Add' }).click();
  434 |     await page.getByRole('button', { name: 'Done' }).click();
  435 |   });
  436 |
  437 |   test('Create Timetable', async () => {
  438 |     await page.getByRole('link', { name: 'Time Table' }).click({ timeout: 10000 });
  439 |     await page.getByRole('button', { name: '+ Add Time Table' }).click();
  440 |     const now = new Date();
  441 |     const startTime = now.toTimeString().slice(0, 5);
  442 |     const endTime = new Date(now.getTime() + 5 * 60000).toTimeString().slice(0, 5);
  443 |     await page.getByRole('textbox', { name: 'Enter time table name' }).fill(timetableName);
  444 |     await page.locator('.css-19bb58m').click();
  445 |     await page.getByRole('option', { name: scenarioName }).click();
  446 |     await page.getByPlaceholder('Select start time').fill(startTime);
  447 |     await page.getByPlaceholder('Select end time').fill(endTime);
  448 |     await page.getByRole('button', { name: 'Add' }).click();
  449 |     await page.getByRole('button', { name: 'Done' }).click();
  450 |   });
  451 |
  452 |   test('Create Schedule', async () => {
  453 |     await page.getByRole('link', { name: 'Schedule' }).click();
  454 |     await page.getByRole('button', { name: '+ Add Schedule' }).click();
  455 |     await page.getByRole('textbox', { name: 'Enter schedule name' }).fill(scheduleName);
  456 |     await page.locator('.css-19bb58m').click();
  457 |     await page.getByRole('option', { name: timetableName }).click();
  458 |     const today = new Date().getDate().toString();
  459 |     await page.getByRole('textbox', { name: 'Select start date' }).click();
  460 |     await page.locator(`.react-datepicker__day >> text="${today}"`).first().click();
  461 |     await page.getByRole('textbox', { name: 'Select end date' }).click();
  462 |     await page.locator(`.react-datepicker__day >> text="${today}"`).first().click();
  463 |     await page.getByRole('button', { name: 'Add' }).click();
  464 |     await page.getByRole('button', { name: 'Done' }).click();
  465 |   });
  466 |
  467 |   test('Assign Scenario to Player', async () => {
  468 |     await page.getByRole('link', { name: 'Dashboard' }).click();
  469 |     await page.getByRole('button', { name: '+ Assign Scenario' }).click();
  470 |     await page.locator('.css-19bb58m').first().click();
```
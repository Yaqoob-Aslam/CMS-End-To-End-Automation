# Test info

- Name: CMS Application End-to-End Tests >> Create a new group
- Location: /home/yaqoob/CMS-End-To-End-Automation/tests/CMS_Automation_1.0.spec.js:383:7

# Error details

```
Error: Timed out 10000ms waiting for expect(locator).toBeVisible()

Locator: getByText('Group U25288')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 10000ms
  - waiting for getByText('Group U25288')

    at /home/yaqoob/CMS-End-To-End-Automation/tests/CMS_Automation_1.0.spec.js:398:47
```

# Page snapshot

```yaml
- banner:
  - heading "CMS" [level=1]
  - button "A"
- button "Expand Icon":
  - img "Expand Icon"
- navigation "Breadcrumb":
  - list:
    - list:
      - listitem:
        - paragraph: Groups Master
      - listitem:
        - paragraph: Groups
- main:
  - complementary:
    - navigation:
      - list:
        - listitem:
          - link "Dashboard":
            - /url: /dashboard
            - img
            - text: Dashboard
        - listitem:
          - link "User Account":
            - /url: /managers
            - img
            - text: User Account
        - listitem:
          - link "Groups":
            - /url: /groups-master/groups
            - img
            - text: Groups
          - list:
            - listitem:
              - link "Groups":
                - /url: /groups-master/groups
            - listitem:
              - link "Subgroups":
                - /url: /groups-master/subgroups
            - listitem:
              - link "Sub Subgroups":
                - /url: /groups-master/sub-subgroups
        - listitem:
          - link "Lan Manager":
            - /url: /groups-master/groups
            - img
            - text: Lan Manager
        - listitem:
          - link "Contents":
            - /url: /groups-master/groups
        - listitem:
          - link "Players":
            - /url: /groups-master/groups
  - article:
    - searchbox "Search..."
    - button "+ Add Group"
    - button "Refresh"
    - table:
      - rowgroup:
        - row "S.No. Groups Actions":
          - cell "S.No."
          - cell "Groups"
          - cell "Actions"
      - rowgroup:
        - row "1 Japan":
          - cell "1":
            - paragraph: "1"
          - cell "Japan":
            - paragraph: Japan
          - cell:
            - button
            - button
        - row "2 Moyai Head Office Main":
          - cell "2":
            - paragraph: "2"
          - cell "Moyai Head Office Main":
            - paragraph: Moyai Head Office Main
          - cell:
            - button
            - button
        - row "3 Group A1":
          - cell "3":
            - paragraph: "3"
          - cell "Group A1":
            - paragraph: Group A1
          - cell:
            - button
            - button
        - row "4 Group W_1":
          - cell "4":
            - paragraph: "4"
          - cell "Group W_1":
            - paragraph: Group W_1
          - cell:
            - button
            - button
        - row "5 First":
          - cell "5":
            - paragraph: "5"
          - cell "First":
            - paragraph: First
          - cell:
            - button
            - button
        - row "6 Group A2":
          - cell "6":
            - paragraph: "6"
          - cell "Group A2":
            - paragraph: Group A2
          - cell:
            - button
            - button
        - row "7 Lahore":
          - cell "7":
            - paragraph: "7"
          - cell "Lahore":
            - paragraph: Lahore
          - cell:
            - button
            - button
        - row "8 Group A3":
          - cell "8":
            - paragraph: "8"
          - cell "Group A3":
            - paragraph: Group A3
          - cell:
            - button
            - button
        - row "9 Group A4":
          - cell "9":
            - paragraph: "9"
          - cell "Group A4":
            - paragraph: Group A4
          - cell:
            - button
            - button
        - row "10 Osaka Branch":
          - cell "10":
            - paragraph: "10"
          - cell "Osaka Branch":
            - paragraph: Osaka Branch
          - cell:
            - button
            - button
    - paragraph: Showing 1-10 from 364
    - combobox:
      - option "10" [selected]
      - option "20"
      - option "50"
    - navigation "Pagination":
      - listitem:
        - button "Previous page" [disabled]
      - listitem:
        - button "Page 1 is your current page": "1"
      - listitem:
        - button "Page 2": "2"
      - listitem:
        - button "Page 3": "3"
      - listitem:
        - button "Page 4": "4"
      - listitem:
        - button "Page 5": "5"
      - listitem:
        - button "Jump forward": ...
      - listitem:
        - button "Page 36": "36"
      - listitem:
        - button "Page 37": "37"
      - listitem:
        - button "Next page"
```

# Test source

```ts
  298 | import { chromium } from 'playwright';
  299 | import fs from 'fs';
  300 | import path from 'path';
  301 | require('dotenv').config();
  302 |
  303 | test.describe.serial('CMS Application End-to-End Tests', () => {
  304 |   let browser, context, page;
  305 |   const groupNumber = Math.floor(Math.random() * 100000);
  306 |   const groupName = `Group U${groupNumber}`;
  307 |   const subGroupName = `Subgroup U${groupNumber}`;
  308 |   const subSubGroupName = `Sub Subgroup U${groupNumber}`;
  309 |   const playerName = `Player U${groupNumber}`;
  310 |   const videoFileName = `test__${groupNumber}.mp4`;
  311 |   const scenarioName = `Scenario U${groupNumber}`;
  312 |   const timetableName = `Timetable U${groupNumber}`;
  313 |   const scheduleName = `Schedule U${groupNumber}`;
  314 |   const firstNames = ['Ali', 'Sara', 'Usman', 'Ayesha', 'Omar', 'Fatima', 'Bilal', 'Hira', 'Zain', 'Zara'];
  315 |   const lastNames = ['Khan', 'Malik', 'Sheikh', 'Qureshi', 'Butt', 'Raza', 'Shah', 'Chaudhry', 'Hussain', 'Mirza'];
  316 |   const getRandomName = (arr) => arr[Math.floor(Math.random() * arr.length)];
  317 |   const uniqueFirstName = getRandomName(firstNames);
  318 |   const uniqueLastName = getRandomName(lastNames);
  319 |   const uniqueEmail = `${uniqueFirstName.toLowerCase()}.${uniqueLastName.toLowerCase()}${groupNumber}@mailinator.com`;
  320 |
  321 |   // Setup before all tests
  322 |   test.beforeAll(async () => {
  323 |     console.log('Launching browser');
  324 |     browser = await chromium.launch({ headless: false, args: ['--start-maximized'] });
  325 |     context = await browser.newContext({ viewport: null, deviceScaleFactor: undefined });
  326 |     page = await context.newPage();
  327 |   });
  328 |
  329 |   // Teardown after all tests
  330 |   test.afterAll(async () => {
  331 |     console.log('Closing browser');
  332 |     if (browser) {
  333 |       await browser.close();
  334 |     }
  335 |   });
  336 |
  337 |   // Attach screenshot on test failure
  338 |   test.afterEach(async ({}, testInfo) => {
  339 |     if (testInfo.status === 'failed') {
  340 |       console.log(`Test "${testInfo.title}" failed: ${testInfo.error?.message}`);
  341 |       await testInfo.attach('error-screenshot', {
  342 |         body: await page.screenshot(),
  343 |         contentType: 'image/png',
  344 |       });
  345 |     }
  346 |   });
  347 |
  348 |   test('Login with valid credentials', async () => {
  349 |     test.slow();
  350 |     console.log('Starting test: Login with valid credentials');
  351 |     try {
  352 |       await page.goto('https://moyai-cms.innov8.jp/login', { timeout: 90000 });
  353 |       if (!process.env.CMS_EMAIL || !process.env.CMS_PASSWORD) {
  354 |         throw new Error('Missing required environment variables: CMS_EMAIL and CMS_PASSWORD');
  355 |       }
  356 |       await page.getByRole('textbox', { name: 'Enter your email address' }).fill(process.env.CMS_EMAIL);
  357 |       await page.getByRole('textbox', { name: 'Enter your password' }).fill(process.env.CMS_PASSWORD);
  358 |       await page.getByRole('button', { name: 'Login' }).click();
  359 |       await expect(page).toHaveURL(/dashboard/, { timeout: 60000 });
  360 |       console.log('Completed test: Login with valid credentials');
  361 |     } catch (error) {
  362 |       console.error(`Error in Login with valid credentials: ${error.message}`);
  363 |       throw error;
  364 |     }
  365 |   });
  366 |
  367 |   test.skip('Login with invalid credentials', async () => {
  368 |     test.slow();
  369 |     console.log('Starting test: Login with invalid credentials');
  370 |     try {
  371 |       await page.goto('https://moyai-cms.innov8.jp/login', { timeout: 90000 });
  372 |       await page.getByRole('textbox', { name: 'Enter your email address' }).fill('invalid@email.com');
  373 |       await page.getByRole('textbox', { name: 'Enter your password' }).fill('wrongpassword');
  374 |       await page.getByRole('button', { name: 'Login' }).click();
  375 |       await expect(page.getByText('Invalid email or password')).toBeVisible({ timeout: 10000 });
  376 |       console.log('Completed test: Login with invalid credentials');
  377 |     } catch (error) {
  378 |       console.error(`Error in Login with invalid credentials: ${error.message}`);
  379 |       throw error;
  380 |     }
  381 |   });
  382 |
  383 |   test('Create a new group', async () => {
  384 |     test.slow();
  385 |     console.log('Starting test: Create a new group');
  386 |     try {
  387 |       // Ensure we're on the dashboard
  388 |       if (!page.url().includes('/dashboard')) {
  389 |         await page.goto('https://moyai-cms.innov8.jp/dashboard', { timeout: 90000 });
  390 |       }
  391 |       await page.getByRole('button', { name: 'Expand Icon' }).click();
  392 |       await page.getByRole('link', { name: 'Groups' }).click();
  393 |       await page.getByRole('listitem').filter({ hasText: /^Groups$/ }).getByRole('link').click();
  394 |       await page.getByRole('button', { name: '+ Add Group' }).click();
  395 |       await page.getByRole('textbox', { name: 'Enter group name' }).fill(groupName);
  396 |       await page.getByRole('button', { name: 'Add' }).click();
  397 |       await page.getByRole('button', { name: 'Done' }).click();
> 398 |       await expect(page.getByText(groupName)).toBeVisible({ timeout: 10000 });
      |                                               ^ Error: Timed out 10000ms waiting for expect(locator).toBeVisible()
  399 |       console.log('Completed test: Create a new group');
  400 |     } catch (error) {
  401 |       console.error(`Error in Create a new group: ${error.message}`);
  402 |       throw error;
  403 |     }
  404 |   });
  405 |
  406 |   test('Create a new subgroup', async () => {
  407 |     test.slow();
  408 |     console.log('Starting test: Create a new subgroup');
  409 |     try {
  410 |       await page.getByRole('link', { name: 'Subgroups', exact: true }).click();
  411 |       await page.getByRole('button', { name: '+ Add Subgroup' }).click();
  412 |       await page.locator('.css-19bb58m').first().click();
  413 |       await page.getByRole('option', { name: groupName }).click();
  414 |       await page.getByRole('textbox', { name: 'Enter sub group name' }).fill(subGroupName);
  415 |       await page.getByRole('button', { name: 'Add' }).click();
  416 |       await page.getByRole('button', { name: 'Done' }).click();
  417 |       await expect(page.getByText(subGroupName)).toBeVisible({ timeout: 10000 });
  418 |       console.log('Completed test: Create a new subgroup');
  419 |     } catch (error) {
  420 |       console.error(`Error in Create a new subgroup: ${error.message}`);
  421 |       throw error;
  422 |     }
  423 |   });
  424 |
  425 |   test('Create a new sub-subgroup', async () => {
  426 |     test.slow();
  427 |     console.log('Starting test: Create a new sub-subgroup');
  428 |     try {
  429 |       await page.getByRole('link', { name: 'Sub Subgroups' }).click();
  430 |       await page.getByRole('button', { name: '+ Add Sub Subgroup' }).click();
  431 |       await page.locator('.css-19bb58m').first().click();
  432 |       await page.getByRole('option', { name: groupName }).click();
  433 |       await page.locator('.css-35k6c7-control .css-19bb58m').click();
  434 |       await page.getByRole('option', { name: subGroupName }).waitFor({ state: 'visible', timeout: 10000 });
  435 |       await page.getByRole('option', { name: subGroupName }).click();
  436 |       await page.getByRole('textbox', { name: 'Enter sub subgroup name' }).fill(subSubGroupName);
  437 |       await page.getByRole('button', { name: 'Add' }).click();
  438 |       await page.getByRole('button', { name: 'Done' }).click();
  439 |       await expect(page.getByText(subSubGroupName)).toBeVisible({ timeout: 10000 });
  440 |       console.log('Completed test: Create a new sub-subgroup');
  441 |     } catch (error) {
  442 |       console.error(`Error in Create a new sub-subgroup: ${error.message}`);
  443 |       throw error;
  444 |     }
  445 |   });
  446 |
  447 |   test('Create a new player', async () => {
  448 |     test.slow();
  449 |     console.log('Starting test: Create a new player');
  450 |     try {
  451 |       await page.getByRole('link', { name: 'Lan Manager' }).click();
  452 |       await page.getByRole('list').filter({ hasText: /^Players$/ }).getByRole('link').click();
  453 |       await page.getByRole('button', { name: '+ Add Player' }).click();
  454 |       await page.locator('.css-19bb58m').first().click();
  455 |       await page.getByRole('option', { name: groupName }).click();
  456 |       await page.waitForSelector('.css-35k6c7-control > .css-hlgwow > .css-19bb58m:not([aria-disabled="true"])', { timeout: 10000 });
  457 |       await page.locator('.css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  458 |       await page.getByRole('option', { name: subGroupName }).click();
  459 |       await page.waitForSelector('div:nth-child(3) > .css-b62m3t-container > .css-35k6c7-control > .css-hlgwow > .css-19bb58m:not([aria-disabled="true"])', { timeout: 10000 });
  460 |       await page.locator('div:nth-child(3) > .css-b62m3t-container > .css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  461 |       await page.getByRole('option', { name: subSubGroupName }).click();
  462 |       await page.getByRole('textbox', { name: 'Enter player name' }).fill(playerName);
  463 |       await page.getByRole('button', { name: 'Add' }).click();
  464 |       await page.waitForSelector('text=Player added successfully.', { timeout: 15000 });
  465 |       await page.getByRole('button', { name: 'Done' }).click();
  466 |       await expect(page.getByText(playerName)).toBeVisible({ timeout: 10000 });
  467 |       console.log('Completed test: Create a new player');
  468 |     } catch (error) {
  469 |       console.error(`Error in Create a new player: ${error.message}`);
  470 |       throw error;
  471 |     }
  472 |   });
  473 |
  474 |   test('Upload a video', async () => {
  475 |     test.slow();
  476 |     console.log('Starting test: Upload a video');
  477 |     try {
  478 |       const projectRoot = path.resolve(__dirname, '..');
  479 |       const videoDir = path.join(projectRoot, 'videos');
  480 |       const existingFiles = fs.existsSync(videoDir) ? fs.readdirSync(videoDir) : [];
  481 |       const firstVideo = existingFiles.find(file => file.endsWith('.mp4'));
  482 |       if (!firstVideo) {
  483 |         console.warn('⚠️ No video found in videos/ folder, skipping test');
  484 |         test.skip();
  485 |         return;
  486 |       }
  487 |       const oldPath = path.join(videoDir, firstVideo);
  488 |       const newPath = path.join(videoDir, videoFileName);
  489 |       fs.renameSync(oldPath, newPath);
  490 |       await page.getByRole('link', { name: 'Contents' }).click();
  491 |       await page.getByRole('link', { name: 'Scenario' }).click();
  492 |       await page.getByRole('button', { name: 'All Videos' }).click();
  493 |       await page.getByRole('button', { name: '+ Add Videos' }).click();
  494 |       const videoPath = path.join(videoDir, videoFileName);
  495 |       if (!fs.existsSync(videoPath)) {
  496 |         throw new Error(`Video file not found: ${videoPath}`);
  497 |       }
  498 |       const stats = fs.statSync(videoPath);
```
# Test info

- Name: CMS Application Automation >> Create Subgroup
- Location: /home/yaqoob/CMS-End-To-End-Automation/tests/CMS-Test-Cases.spec.js:74:9

# Error details

```
TimeoutError: locator.click: Timeout 10000ms exceeded.
Call log:
  - waiting for getByRole('link', { name: 'Subgroups', exact: true })

    at /home/yaqoob/CMS-End-To-End-Automation/tests/CMS-Test-Cases.spec.js:76:72
```

# Page snapshot

```yaml
- banner:
  - heading "CMS" [level=1]
  - button "A"
- button "Expand Icon":
  - img "Expand Icon"
- navigation "Breadcrumb":
  - list:
    - list:
      - listitem:
        - paragraph: Groups Master
      - listitem:
        - paragraph: Groups
- main:
  - complementary:
    - navigation:
      - list:
        - listitem:
          - link:
            - /url: /dashboard
            - img
        - listitem:
          - link:
            - /url: /managers
            - img
        - listitem:
          - link:
            - /url: /groups-master/groups
            - img
        - listitem:
          - link:
            - /url: /groups-master/groups
            - img
        - listitem:
          - link:
            - /url: /groups-master/groups
        - listitem:
          - link:
            - /url: /groups-master/groups
  - article:
    - searchbox "Search..."
    - button "+ Add Group"
    - button "Refresh"
    - table:
      - rowgroup:
        - row "S.No. Groups Actions":
          - cell "S.No."
          - cell "Groups"
          - cell "Actions"
      - rowgroup:
        - row "1 Japan":
          - cell "1":
            - paragraph: "1"
          - cell "Japan":
            - paragraph: Japan
          - cell:
            - button
            - button
        - row "2 Moyai Head Office Main":
          - cell "2":
            - paragraph: "2"
          - cell "Moyai Head Office Main":
            - paragraph: Moyai Head Office Main
          - cell:
            - button
            - button
        - row "3 Group A1":
          - cell "3":
            - paragraph: "3"
          - cell "Group A1":
            - paragraph: Group A1
          - cell:
            - button
            - button
        - row "4 Group W_1":
          - cell "4":
            - paragraph: "4"
          - cell "Group W_1":
            - paragraph: Group W_1
          - cell:
            - button
            - button
        - row "5 First":
          - cell "5":
            - paragraph: "5"
          - cell "First":
            - paragraph: First
          - cell:
            - button
            - button
        - row "6 Group A2":
          - cell "6":
            - paragraph: "6"
          - cell "Group A2":
            - paragraph: Group A2
          - cell:
            - button
            - button
        - row "7 Lahore":
          - cell "7":
            - paragraph: "7"
          - cell "Lahore":
            - paragraph: Lahore
          - cell:
            - button
            - button
        - row "8 Group A3":
          - cell "8":
            - paragraph: "8"
          - cell "Group A3":
            - paragraph: Group A3
          - cell:
            - button
            - button
        - row "9 Group A4":
          - cell "9":
            - paragraph: "9"
          - cell "Group A4":
            - paragraph: Group A4
          - cell:
            - button
            - button
        - row "10 Osaka Branch":
          - cell "10":
            - paragraph: "10"
          - cell "Osaka Branch":
            - paragraph: Osaka Branch
          - cell:
            - button
            - button
    - paragraph: Showing 1-10 from 412
    - combobox:
      - option "10" [selected]
      - option "20"
      - option "50"
    - navigation "Pagination":
      - listitem:
        - button "Previous page" [disabled]
      - listitem:
        - button "Page 1 is your current page": "1"
      - listitem:
        - button "Page 2": "2"
      - listitem:
        - button "Page 3": "3"
      - listitem:
        - button "Page 4": "4"
      - listitem:
        - button "Page 5": "5"
      - listitem:
        - button "Jump forward": ...
      - listitem:
        - button "Page 41": "41"
      - listitem:
        - button "Page 42": "42"
      - listitem:
        - button "Next page"
```

# Test source

```ts
   1 |     import { test, expect } from '@playwright/test';
   2 |     import { chromium } from 'playwright';
   3 |     import fs from 'fs';
   4 |     import path from 'path';
   5 |     import dotenv from 'dotenv';
   6 |
   7 |     dotenv.config();
   8 |
   9 |     test.describe.serial('CMS Application Automation', () => {
   10 |     let browser, context, page;
   11 |     let groupNumber, groupName, subGroupName, subSubGroupName, playerName, videoFileName, scenarioName, timetableName, scheduleName;
   12 |     let projectRoot, videoDir, firstVideo, videoPath;
   13 |     let uniqueFirstName, uniqueLastName, uniqueEmail;
   14 |
   15 |     const firstNames = ['Ali', 'Sara', 'Usman', 'Ayesha', 'Omar', 'Fatima', 'Bilal', 'Hira', 'Zain', 'Zara'];
   16 |     const lastNames = ['Khan', 'Malik', 'Sheikh', 'Qureshi', 'Butt', 'Raza', 'Shah', 'Chaudhry', 'Hussain', 'Mirza'];
   17 |     const getRandomName = arr => arr[Math.floor(Math.random() * arr.length)];
   18 |
   19 |     test.beforeAll(async () => {
   20 |         // Generate unique test data
   21 |         groupNumber = Math.floor(Math.random() * 100000);
   22 |         groupName = `Group U${groupNumber}`;
   23 |         subGroupName = `Subgroup U${groupNumber}`;
   24 |         subSubGroupName = `Sub Subgroup U${groupNumber}`;
   25 |         playerName = `Player U${groupNumber}`;
   26 |         videoFileName = `test__${groupNumber}.mp4`;
   27 |         scenarioName = `Scenario U${groupNumber}`;
   28 |         timetableName = `Timetable U${groupNumber}`;
   29 |         scheduleName = `Schedule U${groupNumber}`;
   30 |
   31 |         uniqueFirstName = getRandomName(firstNames);
   32 |         uniqueLastName = getRandomName(lastNames);
   33 |         uniqueEmail = `${uniqueFirstName.toLowerCase()}.${uniqueLastName.toLowerCase()}${groupNumber}@mailinator.com`;
   34 |
   35 |         // Prepare video
   36 |         projectRoot = path.resolve(__dirname, '..');
   37 |         videoDir = path.join(projectRoot, 'videos');
   38 |         const existingFiles = fs.existsSync(videoDir) ? fs.readdirSync(videoDir) : [];
   39 |         firstVideo = existingFiles.find(file => file.endsWith('.mp4'));
   40 |         if (!firstVideo) throw new Error('⚠️ No video found in videos/ folder');
   41 |
   42 |         const oldPath = path.join(videoDir, firstVideo);
   43 |         const newPath = path.join(videoDir, videoFileName);
   44 |         fs.renameSync(oldPath, newPath);
   45 |         videoPath = newPath;
   46 |
   47 |         // Launch browser
   48 |         browser = await chromium.launch({ headless: false, args: ['--start-maximized'] });
   49 |         context = await browser.newContext({ viewport: null, deviceScaleFactor: undefined });
   50 |         page = await context.newPage();
   51 |     });
   52 |
   53 |     test.beforeAll(async () => {
   54 |         await page.goto('https://moyai-cms.innov8.jp/login', { timeout: 90000 });
   55 |         if (!process.env.CMS_EMAIL || !process.env.CMS_PASSWORD) {
   56 |         throw new Error('Missing required environment variables: CMS_EMAIL and CMS_PASSWORD');
   57 |         }
   58 |         await page.getByRole('textbox', { name: 'Enter your email address' }).fill(process.env.CMS_EMAIL || '');
   59 |         await page.getByRole('textbox', { name: 'Enter your password' }).fill(process.env.CMS_PASSWORD || '');
   60 |         await page.getByRole('button', { name: 'Login' }).click();
   61 |         // await page.waitForURL('**/dashboard', { timeout: 60000 });
   62 |     });
   63 |
   64 |     test('Create Group', async () => {
   65 |       await page.getByRole('button', { name: 'Expand Icon' }).click();
   66 |       await page.getByRole('link', { name: 'Groups' }).click();
   67 |       await page.getByRole('listitem').filter({ hasText: /^Groups$/ }).getByRole('link').click();
   68 |       await page.getByRole('button', { name: '+ Add Group' }).click();
   69 |       await page.getByRole('textbox', { name: 'Enter group name' }).fill(groupName);
   70 |       await page.getByRole('button', { name: 'Add' }).click();
   71 |       await page.getByRole('button', { name: 'Done' }).click();
   72 |     });
   73 |
   74 |     test('Create Subgroup', async () => {
   75 |       await page.getByRole('button', { name: 'Expand Icon' }).click();
>  76 |       await page.getByRole('link', { name: 'Subgroups', exact: true }).click();
      |                                                                        ^ TimeoutError: locator.click: Timeout 10000ms exceeded.
   77 |       await page.getByRole('button', { name: '+ Add Subgroup' }).click();
   78 |       await page.locator('.css-19bb58m').first().click();
   79 |       await page.getByRole('option', { name: groupName }).click();
   80 |       await page.getByRole('textbox', { name: 'Enter sub group name' }).fill(subGroupName);
   81 |       await page.getByRole('button', { name: 'Add' }).click();
   82 |       await page.getByRole('button', { name: 'Done' }).click();
   83 |     });
   84 |
   85 |     test('Create Sub Subgroup', async () => {
   86 |       await page.getByRole('link', { name: 'Sub Subgroups' }).click();
   87 |       await page.getByRole('button', { name: '+ Add Sub Subgroup' }).click();
   88 |       await page.locator('.css-19bb58m').first().click();
   89 |       await page.getByRole('option', { name: groupName }).click();
   90 |       await page.locator('.css-35k6c7-control .css-19bb58m').click();
   91 |       await page.getByRole('option', { name: subGroupName }).click();
   92 |       await page.getByRole('textbox', { name: 'Enter sub subgroup name' }).fill(subSubGroupName);
   93 |       await page.getByRole('button', { name: 'Add' }).click();
   94 |       await page.getByRole('button', { name: 'Done' }).click();
   95 |     });
   96 |
   97 |     test.skip('Create Player', async () => {
   98 |       await page.getByRole('link', { name: 'Lan Manager' }).click();
   99 |       await page.getByRole('list').filter({ hasText: /^Players$/ }).getByRole('link').click();
  100 |       await page.getByRole('button', { name: '+ Add Player' }).click();
  101 |       await page.locator('.css-19bb58m').first().click();
  102 |       await page.getByRole('option', { name: groupName }).click();
  103 |       await page.locator('.css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  104 |       await page.getByRole('option', { name: subGroupName }).click();
  105 |       await page.locator('div:nth-child(3) > .css-b62m3t-container > .css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  106 |       await page.getByRole('option', { name: subSubGroupName }).click();
  107 |       await page.getByRole('textbox', { name: 'Enter player name' }).fill(playerName);
  108 |       await page.getByRole('button', { name: 'Add' }).click();
  109 |       await page.waitForSelector('text=Player added successfully.', { timeout: 15000 });
  110 |       await page.getByRole('button', { name: 'Done' }).click();
  111 |     });
  112 |
  113 |     test.skip('Upload Video', async () => {
  114 |       const stats = fs.statSync(videoPath);
  115 |       if (stats.size > 50 * 1024 * 1024) throw new Error(`Video file exceeds 50MB: ${videoFileName}`);
  116 |       await page.getByRole('link', { name: 'Contents' }).click();
  117 |       await page.getByRole('link', { name: 'Scenario' }).click();
  118 |       await page.getByRole('button', { name: 'All Videos' }).click();
  119 |       await page.getByRole('button', { name: '+ Add Videos' }).click();
  120 |       await page.locator('input[type="file"]').setInputFiles(videoPath);
  121 |       await page.waitForSelector(`text=${videoFileName}`, { timeout: 180000 });
  122 |       await page.waitForSelector('text=Loading...', { state: 'detached', timeout: 480000 });
  123 |       await page.getByRole('button', { name: 'Add' }).click();
  124 |       await page.getByRole('button', { name: 'Done' }).click();
  125 |     });
  126 |
  127 |     test.skip('Create Scenario', async () => {
  128 |       await page.getByRole('button', { name: 'All Scenarios' }).click();
  129 |       await page.getByRole('button', { name: '+ Make Scenario' }).click();
  130 |       await page.getByRole('textbox', { name: 'Enter scenario name' }).fill(scenarioName);
  131 |       await page.locator('.css-19bb58m').click();
  132 |       await page.getByRole('option', { name: videoFileName }).click();
  133 |       const scenarioAddButton = page.getByRole('button', { name: 'Add' });
  134 |       await expect(scenarioAddButton).toBeEnabled({ timeout: 15000 });
  135 |       await scenarioAddButton.click();
  136 |       await page.getByRole('button', { name: 'Done' }).click();
  137 |     });
  138 |
  139 |     test.skip('Create Timetable', async () => {
  140 |       await page.getByRole('link', { name: 'Time Table' }).click();
  141 |       await page.getByRole('button', { name: '+ Add Time Table' }).click();
  142 |       const now = new Date();
  143 |       const startTime = now.toTimeString().slice(0, 5);
  144 |       const endTime = new Date(now.getTime() + 5 * 60000).toTimeString().slice(0, 5);
  145 |       await page.getByRole('textbox', { name: 'Enter time table name' }).fill(timetableName);
  146 |       await page.locator('.css-19bb58m').click();
  147 |       await page.getByRole('option', { name: scenarioName }).click();
  148 |       await page.getByPlaceholder('Select start time').fill(startTime);
  149 |       await page.getByPlaceholder('Select end time').fill(endTime);
  150 |       await page.getByRole('button', { name: 'Add' }).click();
  151 |       await page.getByRole('button', { name: 'Done' }).click();
  152 |     });
  153 |
  154 |     test.skip('Create Schedule', async () => {
  155 |       await page.getByRole('link', { name: 'Schedule' }).click();
  156 |       await page.getByRole('button', { name: '+ Add Schedule' }).click();
  157 |       await page.getByRole('textbox', { name: 'Enter schedule name' }).fill(scheduleName);
  158 |       await page.locator('.css-19bb58m').click();
  159 |       await page.getByRole('option', { name: timetableName }).click();
  160 |       const today = new Date().getDate().toString();
  161 |       await page.getByRole('textbox', { name: 'Select start date' }).click();
  162 |       await page.locator(`.react-datepicker__day >> text="${today}"`).first().click();
  163 |       await page.getByRole('textbox', { name: 'Select end date' }).click();
  164 |       await page.locator(`.react-datepicker__day >> text="${today}"`).first().click();
  165 |       await page.getByRole('button', { name: 'Add' }).click();
  166 |       await page.waitForSelector('text=Schedule added successfully.', { timeout: 15000 });
  167 |       await page.getByRole('button', { name: 'Done' }).click();
  168 |     });
  169 |
  170 |     test.skip('Assign Scenario to Player', async () => {
  171 |       await page.getByRole('link', { name: 'Dashboard' }).click();
  172 |       await page.getByRole('button', { name: '+ Assign Scenario' }).click();
  173 |       await page.locator('.css-19bb58m').first().click();
  174 |       await page.getByRole('option', { name: scenarioName }).click();
  175 |       await page.locator('.css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  176 |       await page.getByRole('option', { name: playerName }).click();
```
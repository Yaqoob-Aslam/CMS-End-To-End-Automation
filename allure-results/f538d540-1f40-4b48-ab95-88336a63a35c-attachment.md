# Test info

- Name: CMS Application Automation >> Create Manager
- Location: /home/yaqoob/CMS-End-To-End-Automation/tests/CMS-Test-Cases.spec.js:178:7

# Error details

```
Error: locator.click: Target page, context or browser has been closed
Call log:
  - waiting for getByRole('link', { name: 'User Account' })

    at /home/yaqoob/CMS-End-To-End-Automation/tests/CMS-Test-Cases.spec.js:179:60
```

# Test source

```ts
   79 |     await page.getByRole('button', { name: 'Done' }).click();
   80 |   });
   81 |
   82 |   test('Create Sub Subgroup', async () => {
   83 |     await page.getByRole('link', { name: 'Sub Subgroups' }).click();
   84 |     await page.getByRole('button', { name: '+ Add Sub Subgroup' }).click();
   85 |     await page.locator('.css-19bb58m').first().click();
   86 |     await page.getByRole('option', { name: groupName }).click();
   87 |     await page.locator('.css-35k6c7-control .css-19bb58m').click();
   88 |     await page.getByRole('option', { name: subGroupName }).click();
   89 |     await page.getByRole('textbox', { name: 'Enter sub subgroup name' }).fill(subSubGroupName);
   90 |     await page.getByRole('button', { name: 'Add' }).click();
   91 |     await page.getByRole('button', { name: 'Done' }).click();
   92 |   });
   93 |
   94 |   test('Create Player', async () => {
   95 |     await page.getByRole('link', { name: 'Lan Manager' }).click();
   96 |     await page.getByRole('list').filter({ hasText: /^Players$/ }).getByRole('link').click();
   97 |     await page.getByRole('button', { name: '+ Add Player' }).click();
   98 |     await page.locator('.css-19bb58m').first().click();
   99 |     await page.getByRole('option', { name: groupName }).click();
  100 |     await page.locator('.css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  101 |     await page.getByRole('option', { name: subGroupName }).click();
  102 |     await page.locator('div:nth-child(3) > .css-b62m3t-container > .css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  103 |     await page.getByRole('option', { name: subSubGroupName }).click();
  104 |     await page.getByRole('textbox', { name: 'Enter player name' }).fill(playerName);
  105 |     await page.getByRole('button', { name: 'Add' }).click();
  106 |     await page.waitForSelector('text=Player added successfully.', { timeout: 15000 });
  107 |     await page.getByRole('button', { name: 'Done' }).click();
  108 |   });
  109 |
  110 |   test('Upload Video', async () => {
  111 |     const stats = fs.statSync(videoPath);
  112 |     if (stats.size > 50 * 1024 * 1024) throw new Error(`Video file exceeds 50MB: ${videoFileName}`);
  113 |     await page.getByRole('link', { name: 'Contents' }).click();
  114 |     await page.getByRole('link', { name: 'Scenario' }).click();
  115 |     await page.getByRole('button', { name: 'All Videos' }).click();
  116 |     await page.getByRole('button', { name: '+ Add Videos' }).click();
  117 |     await page.locator('input[type="file"]').setInputFiles(videoPath);
  118 |     await page.waitForSelector(`text=${videoFileName}`, { timeout: 180000 });
  119 |     await page.waitForSelector('text=Loading...', { state: 'detached', timeout: 480000 });
  120 |     await page.getByRole('button', { name: 'Add' }).click();
  121 |     await page.getByRole('button', { name: 'Done' }).click();
  122 |   });
  123 |
  124 |   test('Create Scenario', async () => {
  125 |     await page.getByRole('button', { name: 'All Scenarios' }).click();
  126 |     await page.getByRole('button', { name: '+ Make Scenario' }).click();
  127 |     await page.getByRole('textbox', { name: 'Enter scenario name' }).fill(scenarioName);
  128 |     await page.locator('.css-19bb58m').click();
  129 |     await page.getByRole('option', { name: videoFileName }).click();
  130 |     const scenarioAddButton = page.getByRole('button', { name: 'Add' });
  131 |     await expect(scenarioAddButton).toBeEnabled({ timeout: 15000 });
  132 |     await scenarioAddButton.click();
  133 |     await page.getByRole('button', { name: 'Done' }).click();
  134 |   });
  135 |
  136 |   test('Create Timetable', async () => {
  137 |     await page.getByRole('link', { name: 'Time Table' }).click();
  138 |     await page.getByRole('button', { name: '+ Add Time Table' }).click();
  139 |     const now = new Date();
  140 |     const startTime = now.toTimeString().slice(0, 5);
  141 |     const endTime = new Date(now.getTime() + 5 * 60000).toTimeString().slice(0, 5);
  142 |     await page.getByRole('textbox', { name: 'Enter time table name' }).fill(timetableName);
  143 |     await page.locator('.css-19bb58m').click();
  144 |     await page.getByRole('option', { name: scenarioName }).click();
  145 |     await page.getByPlaceholder('Select start time').fill(startTime);
  146 |     await page.getByPlaceholder('Select end time').fill(endTime);
  147 |     await page.getByRole('button', { name: 'Add' }).click();
  148 |     await page.getByRole('button', { name: 'Done' }).click();
  149 |   });
  150 |
  151 |   test('Create Schedule', async () => {
  152 |     await page.getByRole('link', { name: 'Schedule' }).click();
  153 |     await page.getByRole('button', { name: '+ Add Schedule' }).click();
  154 |     await page.getByRole('textbox', { name: 'Enter schedule name' }).fill(scheduleName);
  155 |     await page.locator('.css-19bb58m').click();
  156 |     await page.getByRole('option', { name: timetableName }).click();
  157 |     const today = new Date().getDate().toString();
  158 |     await page.getByRole('textbox', { name: 'Select start date' }).click();
  159 |     await page.locator(`.react-datepicker__day >> text="${today}"`).first().click();
  160 |     await page.getByRole('textbox', { name: 'Select end date' }).click();
  161 |     await page.locator(`.react-datepicker__day >> text="${today}"`).first().click();
  162 |     await page.getByRole('button', { name: 'Add' }).click();
  163 |     await page.waitForSelector('text=Schedule added successfully.', { timeout: 15000 });
  164 |     await page.getByRole('button', { name: 'Done' }).click();
  165 |   });
  166 |
  167 |   test('Assign Scenario to Player', async () => {
  168 |     await page.getByRole('link', { name: 'Dashboard' }).click();
  169 |     await page.getByRole('button', { name: '+ Assign Scenario' }).click();
  170 |     await page.locator('.css-19bb58m').first().click();
  171 |     await page.getByRole('option', { name: scenarioName }).click();
  172 |     await page.locator('.css-35k6c7-control > .css-hlgwow > .css-19bb58m').click();
  173 |     await page.getByRole('option', { name: playerName }).click();
  174 |     await page.getByRole('button', { name: 'Add' }).click();
  175 |     await page.getByRole('button', { name: 'Done' }).click();
  176 |   });
  177 |
  178 |   test('Create Manager', async () => {
> 179 |     await page.getByRole('link', { name: 'User Account' }).click();
      |                                                            ^ Error: locator.click: Target page, context or browser has been closed
  180 |     await page.getByRole('button', { name: '+ Create Manager' }).click();
  181 |     await page.getByRole('textbox', { name: 'Enter first name' }).fill(uniqueFirstName);
  182 |     await page.getByRole('textbox', { name: 'Enter last name' }).fill(uniqueLastName);
  183 |     await page.getByRole('textbox', { name: 'Enter email' }).fill(uniqueEmail);
  184 |     await page.locator('.css-19bb58m').click();
  185 |     await page.getByRole('option', { name: groupName }).click();
  186 |     const managerAddButton = page.getByRole('button', { name: 'Add' });
  187 |     await expect(managerAddButton).toBeEnabled({ timeout: 10000 });
  188 |     await managerAddButton.click();
  189 |     await page.getByRole('button', { name: 'Done' }).click();
  190 |   });
  191 |
  192 |   test('Logout', async () => {
  193 |     await page.getByRole('button', { name: 'A', exact: true }).click();
  194 |     await page.getByRole('button', { name: 'Logout' }).click();
  195 |     await page.getByRole('button', { name: 'Yes' }).click();
  196 |     await page.waitForURL('**/login', { timeout: 60000 });
  197 |   });
  198 |
  199 |   test.afterAll(async () => {
  200 |     await browser.close();
  201 |   });
  202 | });
  203 |
```